# THIS FILE HAS BEEN AUTOMATICALLY GENERATED
# Don't manually edit it; instead edit the "cmrel" tool which generated it
# Generated with: main generate-prow --branch master

presubmits:
  cert-manager/cert-manager:
  - name: pull-cert-manager-master-make-test
    max_concurrency: 8
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs unit and integration tests and verification scripts
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-make-volumes: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j2
        - vendor-go
        - ci-presubmit
        - test-ci
        resources:
          requests:
            cpu: 2000m
            memory: 4Gi
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: true
    optional: false
  - name: pull-cert-manager-master-chart
    max_concurrency: 8
    agent: kubernetes
    decorate: true
    annotations:
      description: Verifies the Helm chart passes linting checks
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-dind-enabled: "true"
      preset-make-volumes: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - vendor-go
        - verify-chart
        resources:
          requests:
            cpu: "1"
            memory: 1Gi
        securityContext:
          privileged: true
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: true
    optional: false
  - name: pull-cert-manager-master-e2e-v1-22
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs the end-to-end test suite against a Kubernetes v1.22 cluster
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-cloudflare-credentials: "true"
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-enable-all-feature-gates: "true"
      preset-ginkgo-skip-default: "true"
      preset-make-volumes: "true"
      preset-retry-flakey-jobs: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j3
        - vendor-go
        - e2e-ci
        - K8S_VERSION=1.22
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - make kind-logs
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: false
    optional: true
  - name: pull-cert-manager-master-e2e-v1-23
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs the end-to-end test suite against a Kubernetes v1.23 cluster
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-cloudflare-credentials: "true"
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-enable-all-feature-gates: "true"
      preset-ginkgo-skip-default: "true"
      preset-make-volumes: "true"
      preset-retry-flakey-jobs: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j3
        - vendor-go
        - e2e-ci
        - K8S_VERSION=1.23
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - make kind-logs
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: false
    optional: true
  - name: pull-cert-manager-master-e2e-v1-24
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs the end-to-end test suite against a Kubernetes v1.24 cluster
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-cloudflare-credentials: "true"
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-enable-all-feature-gates: "true"
      preset-ginkgo-skip-default: "true"
      preset-make-volumes: "true"
      preset-retry-flakey-jobs: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j3
        - vendor-go
        - e2e-ci
        - K8S_VERSION=1.24
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - make kind-logs
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: false
    optional: true
  - name: pull-cert-manager-master-e2e-v1-25
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs the end-to-end test suite against a Kubernetes v1.25 cluster
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-cloudflare-credentials: "true"
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-enable-all-feature-gates: "true"
      preset-ginkgo-skip-default: "true"
      preset-make-volumes: "true"
      preset-retry-flakey-jobs: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j3
        - vendor-go
        - e2e-ci
        - K8S_VERSION=1.25
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - make kind-logs
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: false
    optional: true
  - name: pull-cert-manager-master-e2e-v1-26
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs the end-to-end test suite against a Kubernetes v1.26 cluster
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-cloudflare-credentials: "true"
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-enable-all-feature-gates: "true"
      preset-ginkgo-skip-default: "true"
      preset-make-volumes: "true"
      preset-retry-flakey-jobs: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j3
        - vendor-go
        - e2e-ci
        - K8S_VERSION=1.26
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - make kind-logs
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: true
    optional: false
  - name: pull-cert-manager-master-e2e-v1-26-upgrade
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs cert-manager upgrade from latest published release
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-make-volumes: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - K8S_VERSION=1.26
        - vendor-go
        - test-upgrade
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: true
    optional: false
  - name: pull-cert-manager-master-license
    max_concurrency: 8
    agent: kubernetes
    decorate: true
    annotations:
      description: Verifies LICENSES are up to date; only needs to be run if go.mod
        has changed
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-make-volumes: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - vendor-go
        - verify-licenses
        resources:
          requests:
            cpu: "1"
            memory: 1Gi
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: false
    optional: true
    run_if_changed: go.mod
  - name: pull-cert-manager-master-e2e-v1-26-issuers-venafi-tpp
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs the E2E tests with 'Venafi TPP' in name
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-ginkgo-focus-venafi-tpp: "true"
      preset-make-volumes: "true"
      preset-retry-flakey-jobs: "true"
      preset-service-account: "true"
      preset-venafi-tpp-credentials: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j3
        - vendor-go
        - e2e-ci
        - K8S_VERSION=1.26
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - make kind-logs
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: false
    optional: true
  - name: pull-cert-manager-master-e2e-v1-26-issuers-venafi-cloud
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs the E2E tests with 'Venafi Cloud' in name
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-ginkgo-focus-venafi-cloud: "true"
      preset-make-volumes: "true"
      preset-retry-flakey-jobs: "true"
      preset-service-account: "true"
      preset-venafi-cloud-credentials: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j3
        - vendor-go
        - e2e-ci
        - K8S_VERSION=1.26
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - make kind-logs
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: false
    optional: true
  - name: pull-cert-manager-master-e2e-v1-26-feature-gates-disabled
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs the E2E tests with all feature gates disabled
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-cloudflare-credentials: "true"
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-disable-all-alpha-beta-feature-gates: "true"
      preset-ginkgo-skip-default: "true"
      preset-make-volumes: "true"
      preset-retry-flakey-jobs: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j3
        - vendor-go
        - e2e-ci
        - K8S_VERSION=1.26
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - make kind-logs
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: false
    optional: true
  - name: pull-cert-manager-master-e2e-v1-26-bestpractice-install
    max_concurrency: 4
    agent: kubernetes
    decorate: true
    annotations:
      description: Runs the E2E tests with cert-manager installed in accordance with
        https://cert-manager.io/docs/installation/best-practice/
      testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
      testgrid-create-job-group: "true"
      testgrid-dashboards: cert-manager-presubmits-master
    labels:
      preset-bestpractice-install: "true"
      preset-cloudflare-credentials: "true"
      preset-default-e2e-volumes: "true"
      preset-dind-enabled: "true"
      preset-disable-all-alpha-beta-feature-gates: "true"
      preset-ginkgo-skip-default: "true"
      preset-make-volumes: "true"
      preset-retry-flakey-jobs: "true"
      preset-service-account: "true"
    spec:
      containers:
      - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
        args:
        - runner
        - make
        - -j3
        - vendor-go
        - e2e-ci
        - K8S_VERSION=1.26
        resources:
          requests:
            cpu: 3500m
            memory: 12Gi
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/sh
              - -c
              - make kind-logs
      dnsConfig:
        options:
        - name: ndots
          value: "1"
    branches:
    - master
    always_run: false
    optional: true
periodics:
- name: ci-cert-manager-master-make-test
  max_concurrency: 8
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs unit and integration tests and verification scripts
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-make-volumes: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j2
      - vendor-go
      - ci-presubmit
      - test-ci
      resources:
        requests:
          cpu: 2000m
          memory: 4Gi
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 2h
- name: ci-cert-manager-master-e2e-v1-22
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the end-to-end test suite against a Kubernetes v1.22 cluster
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-enable-all-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.22
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 2h
- name: ci-cert-manager-master-e2e-v1-23
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the end-to-end test suite against a Kubernetes v1.23 cluster
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-enable-all-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.23
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 2h
- name: ci-cert-manager-master-e2e-v1-24
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the end-to-end test suite against a Kubernetes v1.24 cluster
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-enable-all-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.24
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 2h
- name: ci-cert-manager-master-e2e-v1-25
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the end-to-end test suite against a Kubernetes v1.25 cluster
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-enable-all-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.25
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 2h
- name: ci-cert-manager-master-e2e-v1-26
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the end-to-end test suite against a Kubernetes v1.26 cluster
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-enable-all-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.26
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 2h
- name: ci-cert-manager-master-e2e-v1-26-issuers-venafi
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs Venafi (VaaS and TPP) e2e tests
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-ginkgo-focus-venafi: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
    preset-venafi-cloud-credentials: "true"
    preset-venafi-tpp-credentials: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.26
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 12h
- name: ci-cert-manager-master-e2e-v1-26-upgrade
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs cert-manager upgrade from latest published release
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-make-volumes: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - K8S_VERSION=1.26
      - vendor-go
      - test-upgrade
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 8h
- name: ci-cert-manager-master-e2e-v1-26-bestpractice-install
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the E2E tests with cert-manager installed in accordance with
      https://cert-manager.io/docs/installation/best-practice/
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-bestpractice-install: "true"
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-disable-all-alpha-beta-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.26
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-e2e-v1-22-feature-gates-disabled
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the E2E tests with all feature gates disabled
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-disable-all-alpha-beta-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.22
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-e2e-v1-23-feature-gates-disabled
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the E2E tests with all feature gates disabled
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-disable-all-alpha-beta-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.23
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-e2e-v1-24-feature-gates-disabled
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the E2E tests with all feature gates disabled
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-disable-all-alpha-beta-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.24
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-e2e-v1-25-feature-gates-disabled
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the E2E tests with all feature gates disabled
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-disable-all-alpha-beta-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.25
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-e2e-v1-26-feature-gates-disabled
  max_concurrency: 4
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs the E2E tests with all feature gates disabled
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
  labels:
    preset-cloudflare-credentials: "true"
    preset-default-e2e-volumes: "true"
    preset-dind-enabled: "true"
    preset-disable-all-alpha-beta-feature-gates: "true"
    preset-ginkgo-skip-default: "true"
    preset-make-volumes: "true"
    preset-retry-flakey-jobs: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j3
      - vendor-go
      - e2e-ci
      - K8S_VERSION=1.26
      resources:
        requests:
          cpu: 3500m
          memory: 12Gi
      securityContext:
        privileged: true
        capabilities:
          add:
          - SYS_ADMIN
      lifecycle:
        preStop:
          exec:
            command:
            - /bin/sh
            - -c
            - make kind-logs
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-trivy-test-controller
  max_concurrency: 2
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs a Trivy scan against the controller container
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-alert-stale-results-hours: "36"
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
    testgrid-num-failures-to-alert: "1"
  labels:
    preset-dind-enabled: "true"
    preset-make-volumes: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j1
      - vendor-go
      - trivy-scan-controller
      resources:
        requests:
          cpu: 1000m
          memory: 2Gi
      securityContext:
        privileged: true
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-trivy-test-acmesolver
  max_concurrency: 2
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs a Trivy scan against the acmesolver container
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-alert-stale-results-hours: "36"
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
    testgrid-num-failures-to-alert: "1"
  labels:
    preset-dind-enabled: "true"
    preset-make-volumes: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j1
      - vendor-go
      - trivy-scan-acmesolver
      resources:
        requests:
          cpu: 1000m
          memory: 2Gi
      securityContext:
        privileged: true
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-trivy-test-ctl
  max_concurrency: 2
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs a Trivy scan against the ctl container
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-alert-stale-results-hours: "36"
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
    testgrid-num-failures-to-alert: "1"
  labels:
    preset-dind-enabled: "true"
    preset-make-volumes: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j1
      - vendor-go
      - trivy-scan-ctl
      resources:
        requests:
          cpu: 1000m
          memory: 2Gi
      securityContext:
        privileged: true
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-trivy-test-cainjector
  max_concurrency: 2
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs a Trivy scan against the cainjector container
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-alert-stale-results-hours: "36"
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
    testgrid-num-failures-to-alert: "1"
  labels:
    preset-dind-enabled: "true"
    preset-make-volumes: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j1
      - vendor-go
      - trivy-scan-cainjector
      resources:
        requests:
          cpu: 1000m
          memory: 2Gi
      securityContext:
        privileged: true
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
- name: ci-cert-manager-master-trivy-test-webhook
  max_concurrency: 2
  agent: kubernetes
  decorate: true
  annotations:
    description: Runs a Trivy scan against the webhook container
    testgrid-alert-email: cert-manager-dev-alerts@googlegroups.com
    testgrid-alert-stale-results-hours: "36"
    testgrid-create-job-group: "true"
    testgrid-dashboards: cert-manager-periodics-master
    testgrid-num-failures-to-alert: "1"
  labels:
    preset-dind-enabled: "true"
    preset-make-volumes: "true"
    preset-service-account: "true"
  spec:
    containers:
    - image: eu.gcr.io/jetstack-build-infra-images/bazelbuild:20230323-d2dfab2-4.2.1
      args:
      - runner
      - make
      - -j1
      - vendor-go
      - trivy-scan-webhook
      resources:
        requests:
          cpu: 1000m
          memory: 2Gi
      securityContext:
        privileged: true
    dnsConfig:
      options:
      - name: ndots
        value: "1"
  extra_refs:
  - org: cert-manager
    repo: cert-manager
    base_ref: master
  interval: 24h
